<!-- <!DOCTYPE html>
<html>
    <head>
        <title>WebSocket demo</title>
    </head>
    <body>
        <script>
            var ws = new WebSocket("ws://127.0.0.1:5678/"),
                messages = document.createElement('ul');
            ws.onmessage = function (event) {
                var messages = document.getElementsByTagName('ul')[0],
                    message = document.createElement('li'),
                    content = document.createTextNode(event.data);
                message.appendChild(content);
                messages.appendChild(message);
            };
            document.body.appendChild(messages);
        </script>
    </body>
</html> -->

<!DOCTYPE html>
<html>
<title>Buzzer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="w3style.css">
<link href="https://www.fontify.me/wf/1f3ad59b12e7708c3255a7abb9820ff0" rel="stylesheet" type="text/css">

<body>

<header class="w3-top w3-bar w3-theme">
  <table class="lights_table"><tr>
      <td class="light l0"></td>
      <td class="light l1"></td>
      <td class="light l2"></td>
      <td class="light l3"></td>
      <td class="light l4"></td>
      <td class="light l3"></td>
      <td class="light l2"></td>
      <td class="light l1"></td>
      <td class="light l0"></td>
    </tr>
  </table>
</header>

<div class="w3-container" style="margin-top:90px">
    <button id="buzzer" onclick="buzz()">BUZZ!</button>
</div>

<footer class="w3-container w3-bottom w3-margin-top footer">
  <h3>$18,000</h3>
</footer>

<script>
function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

function lights_on(i) {
    for (l of document.getElementsByClassName("l" + i.toString())){
        l.classList.add("lit");
    };
}

function lights_off(i) {
    for (l of document.getElementsByClassName("l" + i.toString())){
        l.classList.remove("lit");
    };
}
  
async function buzz() {
    var secs = 5;
    var buzzer_obj = document.getElementById("buzzer");
    buzzer_obj.classList.add('answering');
    for (let i = 0; i < secs; i++) {
        lights_on(i);
    } 
    for (let i = 0; i < secs; i++) {
        await sleep(1000);
        lights_off(i);
    }
    buzzer_obj.classList.remove('answering');
    buzzer_obj.classList.add('toolate');
    await sleep(1000);
    buzzer_obj.classList.remove('toolate');
}
</script>

</body>

